(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,t,n){e.exports=n(40)},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n(2),c=n.n(a),u=n(3),o=n(0),s=n.n(o),l=n(15),i=n.n(l),m=n(5),p=n.n(m),f="/api/persons",d={all:function(){var e=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(f);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(e){return p.a.post(f,e)},update:function(e,t){return p.a.put("".concat(f,"/").concat(e),t)},delete:function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.a.delete("".concat(f,"/").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=(n(39),function(e){var t=e.message,n=e.error;return s.a.createElement("div",{className:"popup".concat(n?" error":"")},t)}),h=function(e){var t=e.setFilter;return s.a.createElement("div",null,"filter shown with ",s.a.createElement("input",{onChange:function(e){t(e.target.value)}}))},v=function(e){var t=e.person,n=e.onDelete,r=e.setError,a=function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Delete ".concat(t.name,"?"))){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,d.delete(t.id).then((function(){return n()}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),r("Information about ".concat(t.name," doesn't exist on the server (already?)."));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}();return s.a.createElement("p",null,t.name," ",t.number," ",s.a.createElement("button",{onClick:a},"delete"))},E=function(e){var t=e.persons,n=e.filter,r=e.onDelete,a=e.setError;return s.a.createElement(s.a.Fragment,null,t.filter((function(e){return e.name.toLocaleLowerCase().match(n||"")})).map((function(e,t){return s.a.createElement(v,{key:"".concat(e.name,"-").concat(t),person:e,onDelete:r,setError:a})})))},w=function(e){var t=e.persons,n=e.fetchPersons,a=e.setError,l=e.setNotice,i=Object(o.useState)(""),m=Object(r.a)(i,2),p=m[0],f=m[1],b=Object(o.useState)(""),h=Object(r.a)(b,2),v=h[0],E=h[1],w=function(){var e=Object(u.a)(c.a.mark((function e(r){var u,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),u={name:p,number:v},-1===(o=t.findIndex((function(e){return e.name===p})))){e.next=11;break}return window.confirm("".concat(p," is already added to the phonebook. Replace the old number with a new one?")),e.next=7,d.update(t[o].id,u);case 7:return e.next=9,n();case 9:return l("".concat(u.name," was updated.")),e.abrupt("return");case 11:return e.prev=11,e.next=14,d.create(u);case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(11),a(e.t0.response.data),e.abrupt("return");case 20:return f(""),E(""),l("".concat(u.name," was added.")),e.next=25,n();case 25:case"end":return e.stop()}}),e,null,[[11,16]])})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement("form",{onSubmit:w},s.a.createElement("div",null,s.a.createElement("p",null,s.a.createElement("strong",null,"name:")," ",s.a.createElement("input",{onChange:function(e){f(e.target.value)},value:p})),s.a.createElement("p",null,s.a.createElement("strong",null,"number:")," ",s.a.createElement("input",{onChange:function(e){E(e.target.value)},value:v}))),s.a.createElement("div",null,s.a.createElement("button",{type:"submit"},"add")))},x=function(){var e=Object(o.useState)([]),t=Object(r.a)(e,2),n=t[0],a=t[1],c=Object(o.useState)(""),u=Object(r.a)(c,2),l=u[0],i=u[1],m=Object(o.useState)(null),p=Object(r.a)(m,2),f=p[0],v=p[1],x=function(e){v({error:!0,message:e}),setTimeout((function(){v(null)}),3e3)},g=function(){return d.all().then((function(e){a(e)}))};Object(o.useEffect)((function(){g()}),[]);var k=g;return s.a.createElement("div",null,f&&s.a.createElement(b,{message:f.message,error:f.error}),s.a.createElement("h2",null,"Phonebook"),s.a.createElement(h,{filter:l,setFilter:i}),s.a.createElement("h2",null,"Add a new number"),s.a.createElement(w,{persons:n,fetchPersons:g,setNotice:function(e){v({error:!1,message:e}),setTimeout((function(){v(null)}),3e3)},setError:x}),s.a.createElement("h2",null,"Numbers"),s.a.createElement(E,{persons:n,filter:l,onDelete:k,setError:x}))};i.a.render(s.a.createElement(x,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.f7c32273.chunk.js.map