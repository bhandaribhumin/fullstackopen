(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,t,n){e.exports=n(40)},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n(2),c=n.n(a),o=n(4),u=n(0),l=n.n(u),s=n(15),i=n.n(s),m=n(5),f=n.n(m),p="/api/persons",d={all:function(){var e=Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(p);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(e){return f.a.post(p,e)},update:function(e,t){return f.a.put("".concat(p,"/").concat(e),t)},delete:function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.delete("".concat(p,"/").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=(n(39),function(e){var t=e.message,n=e.error;return l.a.createElement("div",{className:"popup".concat(n?" error":"")},t)}),h=function(e){var t=e.setFilter;return l.a.createElement("div",null,"filter shown with ",l.a.createElement("input",{onChange:function(e){t(e.target.value)}}))},E=function(e){var t=e.person,n=e.onDelete,r=e.setError,a=function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Delete ".concat(t.name,"?"))){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,d.delete(t.id).then((function(){return n()}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),r("Information about ".concat(t.name," doesn't exist on the server (already?)."));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}();return l.a.createElement("p",null,t.name," ",t.number," ",l.a.createElement("button",{onClick:a},"delete"))},v=function(e){var t=e.persons,n=e.filter,r=e.onDelete,a=e.setError;return l.a.createElement(l.a.Fragment,null,t.filter((function(e){return e.name.toLocaleLowerCase().match(n||"")})).map((function(e,t){return l.a.createElement(E,{key:"".concat(e.name,"-").concat(t),person:e,onDelete:r,setError:a})})))},w=function(e){var t=e.persons,n=e.fetchPersons,a=e.setNotice,c=Object(u.useState)(""),o=Object(r.a)(c,2),s=o[0],i=o[1],m=Object(u.useState)(""),f=Object(r.a)(m,2),p=f[0],b=f[1];return l.a.createElement("form",{onSubmit:function(e){e.preventDefault();var r={name:s,number:p},c=t.findIndex((function(e){return e.name===s}));if(-1!==c)return window.confirm("".concat(s," is already added to the phonebook. Replace the old number with a new one?")),d.update(t[c].id,r).then(n),void a("".concat(r.name," was updated."));d.create(r).then(n),a("".concat(r.name," was added.")),i(""),b("")}},l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("strong",null,"name:")," ",l.a.createElement("input",{onChange:function(e){i(e.target.value)},value:s})),l.a.createElement("p",null,l.a.createElement("strong",null,"number:")," ",l.a.createElement("input",{onChange:function(e){b(e.target.value)},value:p}))),l.a.createElement("div",null,l.a.createElement("button",{type:"submit"},"add")))},g=function(){var e=Object(u.useState)([]),t=Object(r.a)(e,2),n=t[0],a=t[1],c=Object(u.useState)(""),o=Object(r.a)(c,2),s=o[0],i=o[1],m=Object(u.useState)(null),f=Object(r.a)(m,2),p=f[0],E=f[1],g=function(){d.all().then((function(e){a(e)}))};Object(u.useEffect)(g,[]);var j=g;return l.a.createElement("div",null,p&&l.a.createElement(b,{message:p.message,error:p.error}),l.a.createElement("h2",null,"Phonebook"),l.a.createElement(h,{filter:s,setFilter:i}),l.a.createElement("h2",null,"Add a new number"),l.a.createElement(w,{persons:n,fetchPersons:g,setNotice:function(e){E({error:!1,message:e}),setTimeout((function(){E(null)}),3e3)}}),l.a.createElement("h2",null,"Numbers"),l.a.createElement(v,{persons:n,filter:s,onDelete:j,setError:function(e){E({error:!0,message:e}),setTimeout((function(){E(null)}),3e3)}}))};i.a.render(l.a.createElement(g,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.da1e5294.chunk.js.map